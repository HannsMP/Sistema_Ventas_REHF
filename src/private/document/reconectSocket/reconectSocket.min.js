var socket; document.addEventListener("DOMContentLoaded", () => { function e() { setTimeout(async n => { try { if (!(await query.get("/socket.io/socket.io.js")).ok) return e(); window.location.reload() } catch { e() } }, 1e3) } function n() { (socket = io()).on("connect", () => { alarm.success("Conexi\xf3n establecida") }), socket.on("disconnect", () => { alarm.error("Desconectado. Intentando reconectar..."), e() }), socket.on("reconnect_attempt", () => { alarm.info("Intentando reconectar..."), e() }), socket.on("reconnect_error", n => { alarm.error("Error al reconectar: " + n.message), e() }), socket.on("reconnect_failed", () => { alarm.error("Fallo al reconectar. Intentando nuevamente..."), e() }) } n() });