class Tables{constructor(e){this.i=$(e),this.table=this.i[0]}init(e,a="tb_search"){let t={data:[],pageLength:50,rowId:"id",autoWidth:!1,ordering:!0,paging:!0,searching:!0,searchDelay:200,deferRender:!0,processing:!0,language:{decimal:"",emptyTable:"No hay datos disponibles en la tabla",info:"Mostrando _START_ a _END_ de _TOTAL_ entradas",infoEmpty:"Mostrando 0 a 0 de 0 entradas",infoFiltered:"(filtrado de _MAX_ entradas totales)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ entradas",loadingRecords:"Cargando...",processing:"Cargando datos, por favor espera...",search:"Buscar:",zeroRecords:"No se encontraron registros coincidentes",select:{rows:{0:"Haga clic en una fila para seleccionarla",1:"1 Fila seleccionada",_:"%d Filas seleccionadas"}},paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": activar para ordenar la columna ascendente",sortDescending:": activar para ordenar la columna descendente",orderable:"Ordenar por esta columna",orderableReverse:"Ordenar esta columna en orden inverso"},searchPanes:{title:{_:"Filtros seleccionados - %d",0:"No hay filtros seleccionados",1:"Un filtro seleccionado"}}},buttons:[{extend:"copy",text:"Copiar"},{extend:"csv",text:"CSV"},{extend:"excel",text:"Excel"},{extend:"pdf",text:"PDF"},{extend:"print",text:"Imprimir"}]};if(e.data&&(t.data=e.data),e.pageLength&&(t.pageLength=e.pageLength),e.select&&(t.select=e.select),e.order&&(t.order=e.order),e.columns&&(t.columns=e.columns),e.columnDefs&&(t.columnDefs=e.columnDefs),e.serverSide&&(t.serverSide=e.serverSide),e.ajax){if("function"==typeof e.ajax){let s=e.ajax;e.ajax=(e,a)=>{$(".dt-processing").css("display","flex"),s(e,e=>{a(e),$(".dt-processing").css("display","none")})}}t.ajax=e.ajax}if(this.datatable=this.i.DataTable(t),this.config=t,a){let r;this.datatable.on("search",(e,t)=>(clearTimeout(r),r=setTimeout(()=>{let e=new URL(window.location.href),s=t?.oPreviousSearch?.search;s?e.searchParams.has(a)?e.searchParams.set(a,s):e.searchParams.append(a,s):e.searchParams.delete(a),history.pushState({},"",e.toString())},200),t?.oPreviousSearch?.search));let o=new URL(window.location.href);if(o.searchParams.has(a)){let d=o.searchParams.get(a);this.datatable.search(d).draw()}}}selected(){return this.datatable.row({selected:!0}).data()?.id}selecteds(){return this.datatable.rows({selected:!0}).data().toArray().map(e=>e.id)}data(e){this.datatable.clear(),this.add(...e)}add(...e){e.forEach(e=>this.datatable.row.add(e)),this.datatable.draw()}remove(...e){e.forEach(e=>this.datatable.row(e).remove()),this.datatable.draw(!1)}toggle(e,a){this.datatable.row(e).nodes().to$().toggleClass(a)}update(e,a){let t=this.datatable.row(e),s=t.data();return t.data({...s,...a}).draw(!1),s}get(e){return this.datatable.row(e).data()}search(e,...a){this.datatable.search(e,...a).draw()}buttons(e=".tables-utils .download"){this.datatable.buttons().container().appendTo(e)}toggleColumn(e,a){this.datatable.column(e).visible(a)}toggleSelect(e,a=this.config?.select?.style||"single"){this.datatable.select.style(e?a:"api"),e||this.datatable.rows().deselect()}}