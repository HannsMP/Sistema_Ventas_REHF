class Tables{constructor(a){this.i=$(a),this.table=this.i[0]}init(a,e=!0){if(this.table.classList.add("load-spinner"),this.datatable=this.i.DataTable({data:a.data||[],rowId:"id",autoWidth:!1,ordering:!0,paging:!0,pageLength:a.pageLength||50,select:a.select,order:a.order,searching:!0,searchDelay:200,columns:a.columns,deferRender:!0,columnDefs:a.columnDefs,language:{decimal:"",emptyTable:"No hay datos disponibles en la tabla",info:"Mostrando _START_ a _END_ de _TOTAL_ entradas",infoEmpty:"Mostrando 0 a 0 de 0 entradas",infoFiltered:"(filtrado de _MAX_ entradas totales)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ entradas",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"No se encontraron registros coincidentes",select:{rows:{0:"Haga clic en una fila para seleccionarla",1:"1 Fila seleccionada",_:"%d Filas seleccionadas"}},paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": activar para ordenar la columna ascendente",sortDescending:": activar para ordenar la columna descendente",orderable:"Ordenar por esta columna",orderableReverse:"Ordenar esta columna en orden inverso"},searchPanes:{title:{_:"Filtros seleccionados - %d",0:"No hay filtros seleccionados",1:"Un filtro seleccionado"}}},buttons:[{extend:"copy",text:"Copiar"},{extend:"csv",text:"CSV"},{extend:"excel",text:"Excel"},{extend:"pdf",text:"PDF"},{extend:"print",text:"Imprimir"}],initComplete:(a,e)=>{this.table.classList.remove("load-spinner")}}),this.config=a,e){let t;this.datatable.on("search",(a,e)=>(clearTimeout(t),t=setTimeout(()=>{let a=new URL(window.location.href),t=e?.oPreviousSearch?.search;t?a.searchParams.has("tb_search")?a.searchParams.set("tb_search",t):a.searchParams.append("tb_search",t):a.searchParams.delete("tb_search"),history.pushState({},"",a.toString())},200),e?.oPreviousSearch?.search));let s=new URL(window.location.href);if(s.searchParams.has("tb_search")){let r=s.searchParams.get("tb_search");this.datatable.search(r).draw()}}}selected(){return this.datatable.row({selected:!0}).data()?.id}selecteds(){return this.datatable.rows({selected:!0}).data().toArray().map(a=>a.id)}data(a){this.datatable.clear(),this.add(...a)}add(...a){a.forEach(a=>this.datatable.row.add(a)),this.datatable.draw()}remove(...a){a.forEach(a=>this.datatable.row(a).remove()),this.datatable.draw(!1)}toggle(a,e){this.datatable.row(a).nodes().to$().toggleClass(e)}update(a,e){let t=this.datatable.row(a),s=t.data();return t.data({...s,...e}).draw(!1),s}get(a){return this.datatable.row(a).data()}search(a,...e){this.datatable.search(a,...e).draw()}buttons(a=".tables-utils .download"){this.datatable.buttons().container().appendTo(a)}toggleColumn(a,e){this.datatable.column(a).visible(e)}toggleSelect(a,e=this.config?.select?.style||"single"){this.datatable.select.style(a?e:"api")}}