class Tables{constructor(e){this.i=$(e),this.table=this.i[0]}init(e,a=!0){if(this.table.classList.add("load-spinner"),this.datatable=this.i.DataTable({rowId:"id",pageLength:e.pageLength||50,autoWidth:!1,searching:!0,ordering:!0,paging:!0,select:e.select,language:{decimal:"",emptyTable:"No hay datos disponibles en la tabla",info:"Mostrando _START_ a _END_ de _TOTAL_ entradas",infoEmpty:"Mostrando 0 a 0 de 0 entradas",infoFiltered:"(filtrado de _MAX_ entradas totales)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar _MENU_ entradas",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"No se encontraron registros coincidentes",select:{rows:{0:"Haga clic en una fila para seleccionarla",1:"1 Fila seleccionada",_:"%d Filas seleccionadas"}},paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": activar para ordenar la columna ascendente",sortDescending:": activar para ordenar la columna descendente",orderable:"Ordenar por esta columna",orderableReverse:"Ordenar esta columna en orden inverso"},searchPanes:{title:{_:"Filtros seleccionados - %d",0:"No hay filtros seleccionados",1:"Un filtro seleccionado"}}},buttons:[{extend:"copy",text:"Copiar"},{extend:"csv",text:"CSV"},{extend:"excel",text:"Excel"},{extend:"pdf",text:"PDF"},{extend:"print",text:"Imprimir"}],initComplete:(e,a)=>{this.table.classList.remove("load-spinner")},data:e.data||[],order:e.order,columnDefs:e.columnDefs,columns:e.columns}),a){let t;this.datatable.on("search",(e,a)=>(clearTimeout(t),t=setTimeout(()=>{let e=new URL(window.location.href),t=a?.oPreviousSearch?.search;t?e.searchParams.has("tb_search")?e.searchParams.set("tb_search",t):e.searchParams.append("tb_search",t):e.searchParams.delete("tb_search"),history.pushState({},"",e.toString())},200),a?.oPreviousSearch?.search));let s=new URL(window.location.href);if(s.searchParams.has("tb_search")){let r=s.searchParams.get("tb_search");this.datatable.search(r).draw()}}}selected(){return Number(this.table.querySelector(".selected")?.id)}selecteds(){let e=this.table.querySelectorAll(".selected"),a=[];return e.forEach(e=>a.push(e?.id)),a}data(e){this.datatable.clear(),this.add(...e)}add(...e){e.forEach(e=>this.datatable.row.add(e)),this.datatable.draw()}remove(...e){e.forEach(e=>this.datatable.row(e).remove()),this.datatable.draw(!1)}toggle(e,a){this.datatable.row(e).nodes().to$().toggleClass(a)}update(e,a){let t=this.datatable.row(e),s=t.data();return t.data({...s,...a}).draw(!1),s}get(e){return this.datatable.row(e).data()}search(e,...a){this.datatable.search(e,...a).draw()}buttons(e=".tables-utils .download"){this.datatable.buttons().container().appendTo(e)}}