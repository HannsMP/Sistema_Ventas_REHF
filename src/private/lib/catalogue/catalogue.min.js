(()=>{class t{collection={};idsFilter=[];constructor(t,e=20){t.classList.add("catalogue-content"),t.innerHTML='<div class="catalogue-footer"><div class="catalogue-details"><span class="paginator-length"></span><span class="paginator-show"></span></div><div class="catalogue-paginator"></div></div><div class="catalogue-grid"></div>',this.catalogoBox=t,this.catalogoGrid=t.querySelector(".catalogue-grid"),this.paginatorLength=t.querySelector(".paginator-length"),this.paginatorShow=t.querySelector(".paginator-show"),this.catalogoPaginator=t.querySelector(".catalogue-paginator"),this.length=e}#a({id:e,producto:i,descripcion:a,cantidad:s,codigo:o,src:l,venta:r,categoria_id:c,categoria_nombre:n}){let d=document.createElement("div");d.classList.add("product-box"),d.dataset.id=e,d.innerHTML=`<div class="product"><div class="product-imagen"><img src="${l}" class="imagen"><span class="product-counter">${s}</span></div><div class="product-details"><span class="detail-name">${i}</span><span class="detail-category">${n}</span><p class="detail-description scroll-y">${a}</p><div class="details-data"><span class="detail-code">${o}</span><span class="detail-price">s/ ${r}</span> </div></div></div>`,this.collection[e]={data:{id:e,producto:i,descripcion:a,codigo:o,src:l,venta:r,categoria_id:c,categoria_nombre:n},catalogueProduct:d,imagen:d.querySelector(".imagen"),productCounter:d.querySelector(".product-counter"),detailName:d.querySelector(".detail-name"),detailCategory:d.querySelector(".detail-category"),detailDescription:d.querySelector(".detail-description"),detailCode:d.querySelector(".detail-code"),detailPrice:d.querySelector(".detail-price"),isShow:!0}}charge(t){t.forEach(t=>this.#a(t)),this.filter()}insert(t){this.#a(t)}update(t,e){if(!this.collection.hasOwnProperty(t))return;let i=this.collection[t];e={...i.data,...e},i.data=e,i.imagen.src=e.src,i.productCounter.textContent=e.cantidad,i.detailName.textContent=e.producto,i.detailCategory.textContent=e.categoria_nombre,i.detailDescription.textContent=e.descripcion,i.detailCode.textContent=e.codigo,i.detailPrice.textContent=e.venta}delete(t){if(!this.collection.hasOwnProperty(t))return;let{catalogueProduct:e}=this.collection[t];e.remove(),delete this.collection[t]}filter(t){if(t)for(let e in this.idsFilter=[],this.collection)t(this.collection[e].data,e)&&this.idsFilter.push(e);else this.idsFilter=Object.keys(this.collection);this.draw()}draw(){let t=this.idsFilter.length;if(0===t){this.catalogoGrid.innerHTML="",this.paginatorLength.innerText="No hay productos disponibles",this.paginatorShow.innerText="0";return}let e=Math.ceil(t/this.length),i=[],a;this.catalogoPaginator.innerHTML="";for(let s=0;s<e;s++){let o=document.createElement("a");o.classList.add("pag"),o.innerText=s+1;let l=s*this.length,r=Math.min(l+this.length,t),c=()=>{a?.classList?.remove("active"),this.#b(this.idsFilter.slice(l,r)),this.paginatorLength.innerText=`Mostrando de ${l+1} a ${r}, de ${this.idsFilter.length} entradas`,this.paginatorShow.innerText=`Visibles ${r-l}`,o.classList.add("active"),a=o};o.addEventListener("click",c),i.push({anchor:o,click:c}),this.catalogoPaginator.append(o)}a=i[0].anchor,i[0].click()}#b(h){this.catalogoGrid.innerHTML="",h.forEach(t=>{let{isShow:e,catalogueProduct:i}=this.collection[t];e&&this.catalogoGrid.append(i)})}}window.Catalogue=t})();