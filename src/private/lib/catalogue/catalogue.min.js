class Catalogue{ev=new EventListener;#a=0;#b=0;#c=0;#d={};constructor(t,a,i,e=20){this.fetchCallback=a,this.factoryCallback=i,this.#a=e,t.classList.add("catalogue-content"),t.innerHTML='<div class="catalogue-footer"><div class="catalogue-details"><span class="paginator-length"></span><span class="paginator-show"></span></div><div class="catalogue-paginator"></div></div><div class="catalogue-grid"></div>',this.catalogoBox=t,this.catalogoGrid=t.querySelector(".catalogue-grid"),this.paginatorLength=t.querySelector(".paginator-length"),this.paginatorShow=t.querySelector(".paginator-show"),this.catalogoPaginator=t.querySelector(".catalogue-paginator"),this.draw()}filter(t){this.#d=t,this.draw()}draw(t=0){this.#b=t,this.catalogoGrid.innerHTML="",this.fetchCallback({filter:this.#d,start:this.#a*t,length:this.#a},t=>{console.log(t),this.#c=t.recordsTotal||0,this.#e(t.data),this.#f()})}#e(t){let a=0;t?.forEach(t=>{let i=document.createElement("div");i.classList.add("product-box"),i.dataset.id=t.id,i.innerHTML=this.factoryCallback(t),this.catalogoGrid.append(i),a++});let i=this.#a*this.#b;this.paginatorLength.innerText=`Mostrando de ${i+1} a ${i+a}, de ${this.#c} entradas`,this.paginatorShow.innerText=`Visibles ${a}`}#f(){let e=Math.ceil(this.#c/this.#a);this.catalogoPaginator.innerHTML="",this.catalogoPaginator.append(this.#g("Primero",()=>this.draw(0),0===this.#b)),this.catalogoPaginator.append(this.#g("Anterior",()=>this.draw(this.#b-1),0===this.#b));for(let r=Math.max(0,this.#b-2);r<=Math.min(e-1,this.#b+2);r++){let s=this.#g(r+1,()=>this.draw(r),r===this.#b);r===this.#b&&s.classList.add("active"),this.catalogoPaginator.append(s)}this.catalogoPaginator.append(this.#g("Siguiente",()=>this.draw(this.#b+1),this.#b===e-1)),this.catalogoPaginator.append(this.#g("\xdaltimo",()=>this.draw(e-1),this.#b===e-1))}#g(n,h,o=!1){let c=document.createElement("button");return c.className="pag",c.innerText=n,c.disabled=o,c.addEventListener("click",h),c}}