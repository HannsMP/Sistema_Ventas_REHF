class Catalogue{ev=new EventListener;#a=new Map;#b=0;#c=0;#d=0;#e="asc";#f={};constructor(t,a,e,i=20){this.fetchCallback=a,this.factoryCallback=e,this.#b=i,t.classList.add("catalogue-content"),t.innerHTML='<div class="catalogue-footer"><div class="catalogue-details"><span class="paginator-length"></span><span class="paginator-show"></span></div><div class="catalogue-paginator"></div></div><div class="catalogue-grid"></div>',this.catalogoBox=t,this.catalogoGrid=t.querySelector(".catalogue-grid"),this.paginatorLength=t.querySelector(".paginator-length"),this.paginatorShow=t.querySelector(".paginator-show"),this.catalogoPaginator=t.querySelector(".catalogue-paginator"),this.draw()}set(t,a,e=!0){if(!this.#a.has(t))return;let i=this.#a.get(t);"function"==typeof a?a(i.data):e&&(i.data={...i.data,...a}),i.productHTML.innerHTML=this.factoryCallback(i.data)}delete(t){if(this.#a.has(t))this.#a.get(t).productHTML.remove(),this.#a.delete(t)}filter(t){this.#f=t,this.draw()}draw(t=0){this.#c=t,this.catalogoGrid.innerHTML="",this.fetchCallback({filter:this.#f,order:this.#e,start:this.#b*t,length:this.#b},t=>{this.#d=t.recordsTotal||0,this.#g(t.data),this.#h()})}#g(t){let a=0;this.#a.clear(),t?.forEach(t=>{let e=document.createElement("div");e.classList.add("product-box"),e.dataset.id=t.id,e.innerHTML=this.factoryCallback(t),this.catalogoGrid.append(e),a++,this.#a.set(t.id,{data:t,productHTML:e})});let e=this.#b*this.#c;this.paginatorLength.innerText=`Mostrando de ${e+1} a ${e+a}, de ${this.#d} entradas`,this.paginatorShow.innerText=`Visibles ${a}`}#h(){let i=Math.ceil(this.#d/this.#b);this.catalogoPaginator.innerHTML="",this.catalogoPaginator.append(this.#i("Primero",()=>this.draw(0),0===this.#c)),this.catalogoPaginator.append(this.#i("Anterior",()=>this.draw(this.#c-1),0===this.#c));for(let r=Math.max(0,this.#c-2);r<=Math.min(i-1,this.#c+2);r++){let s=this.#i(r+1,()=>this.draw(r),r===this.#c);r===this.#c&&s.classList.add("active"),this.catalogoPaginator.append(s)}this.catalogoPaginator.append(this.#i("Siguiente",()=>this.draw(this.#c+1),this.#c===i-1)),this.catalogoPaginator.append(this.#i("\xdaltimo",()=>this.draw(i-1),this.#c===i-1))}#i(n,h,o=!1){let c=document.createElement("button");return c.className="pag",c.innerText=n,c.disabled=o,c.addEventListener("click",h),c}}